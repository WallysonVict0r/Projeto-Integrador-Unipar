<div class="overlay">
  <div class="modal-container">
    <div class="modal-header">
      <a (click)="closeModal()">
        <img src="assets/Voltar.png" >
      </a>
        <h2>Cadastro De Ambientes</h2>
    </div>

    <div class="modal-body">
      <fieldset *ngFor="let ambiente of ambientesAdicionados; let i = index">
        <div class="form-row">
          <div class="desc-part col-8">
            <label for="descricao-{{i}}">Nome do Ambiente:</label>
            <input id="descricao-{{i}}" type="text" class="form-control" [(ngModel)]="ambiente.nomeAmbiente" required>
          </div>
          <div class="data-part col-4">
            <label for="bloco-{{i}}">Bloco:</label>
            <select id="bloco-{{i}}" class="form-control" [(ngModel)]="ambiente.bloco"  required>
              <option *ngFor="let optBloco of blocosSelecionados" [value]="optBloco.id">
                {{ optBloco.descricao }}
              </option>
            </select>
          </div>
        </div>

        <div class="service-entry">
          <div class="data-part">
            <label for="patrimonio-{{i}}">Patrimônio:</label>
            <button (click)="openPatrimonioOverlay(ambiente)" class="btn btn-primary">Selecionar Patrimônios</button>
          </div>
          <div class="data-part">
            <label for="descricaoPatrimonio-{{i}}">Descrição do Patrimônio:</label>
            <input id="descricaoPatrimonio-{{i}}" type="text" class="form-control"
                   [value]="getDescricaoPatrimonios(ambiente.patrimonios)" readonly>
          </div>
          <img src="../../../assets/Vector.svg" class="removerServico" *ngIf="i > 0" (click)="removerAmbiente(i)" />
        </div>
      </fieldset>
    </div>
    <div class="modal-footer">
      <button (click)="salvarAmbientes()" class="btn btn-success">Guardar</button>
    </div>
  </div>
</div>

<div *ngIf="showPatrimonioOverlay" class="overlay">
  <div class="modal-container">
    <div class="modal-header">
      <h2>Selecione os Patrimônios</h2>
      <button (click)="closePatrimonioOverlay()" class="close-button">X</button>
    </div>
    <div class="modal-body">
      <ul>
        <li *ngFor="let patrimonio of patrimoniosDisponiveis">
          <input type="checkbox" [(ngModel)]="patrimonio.selected" />
          {{ patrimonio.descricao }}
        </li>
      </ul>
    </div>
    <div class="modal-footer">
      <button (click)="confirmarPatrimonios()" class="btn btn-primary">Confirmar</button>
    </div>
  </div>
</div>
